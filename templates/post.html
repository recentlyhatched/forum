<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{{.Post.Title}}</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<header>
  <h1>{{.Post.Title}}</h1>
  <p class="meta">By {{.Post.Author}} at {{.Post.Created}}</p>
</header>

<main>
  <article class="post">
    <p>{{.Post.Body}}</p>
    <p class="likes">
      Likes: {{.Post.Likes}} | Dislikes: {{.Post.Dislikes}}
      {{if .User}}
        <form method="post" action="/like" class="inline-form">
          <input type="hidden" name="target_type" value="post">
          <input type="hidden" name="target_id" value="{{.Post.ID}}">
          <button name="value" value="1">ğŸ‘</button>
          <button name="value" value="-1">ğŸ‘</button>
        </form>
      {{end}}
    </p>
  </article>

  <section>
    <h3>Categories</h3>
    <ul>
      {{range .Categories}}
        <li>{{.Name}}</li>
      {{end}}
    </ul>
  </section>

  <section>
    <h3>Comments</h3>
    {{range .Comments}}
      <div class="comment">
        <p>{{.Body}}</p>
        <p class="meta">By {{.Author}} at {{.Created}}</p>
        <p class="likes">ğŸ‘ {{.Likes}} | ğŸ‘ {{.Dislikes}}
          {{if $.User}}
          <form method="post" action="/like" class="inline-form">
            <input type="hidden" name="target_type" value="comment">
            <input type="hidden" name="target_id" value="{{.ID}}">
            <button name="value" value="1">ğŸ‘</button>
            <button name="value" value="-1">ğŸ‘</button>
          </form>
          {{end}}
        </p>
      </div>
    {{else}}
      <p>No comments yet.</p>
    {{end}}
  </section>

  {{if .User}}
  <section>
    <h3>Add Comment</h3>
    <form method="post" action="/comment/create" class="form-card">
      <input type="hidden" name="post_id" value="{{.Post.ID}}">
      <textarea name="body" required></textarea>
      <button type="submit">Comment</button>
    </form>
  </section>
  {{end}}
</main>
</body>
</html>
